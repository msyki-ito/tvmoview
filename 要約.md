ä¸»è¦ãƒ•ã‚¡ã‚¤ãƒ«ã®è¦ç´„ã§ã™ã€‚

ãƒ•ã‚¡ã‚¤ãƒ« : MainActivity.kt
å½¹å‰²    : ã‚¢ãƒ—ãƒªã®ã‚¨ãƒ³ãƒˆãƒªãƒã‚¤ãƒ³ãƒˆ å…¼ ç”»é¢ãƒŠãƒ“ã‚²ãƒ¼ã‚·ãƒ§ãƒ³è¦ª

â— ã‚°ãƒ­ãƒ¼ãƒãƒ«
  - mediaRepository : MediaRepository            // ãƒ†ã‚¹ãƒˆç”¨ãƒ­ãƒ¼ã‚«ãƒ«ãƒ‡ãƒ¼ã‚¿
  - authManager     : AuthenticationManager      // MS OAuth2 èªè¨¼
  - oneDriveRepository : OneDriveRepository      // OneDrive API æ“ä½œ

â— onCreate()
  1. mediaRepository åˆæœŸåŒ–ï¼ˆãƒ†ã‚¹ãƒˆãƒ‡ãƒ¼ã‚¿ï¼‰
  2. AuthenticationManager / OneDriveRepository ã‚’ç”Ÿæˆ
  3. setContent â†’ TVMovieTheme å†…ã§ AuthenticationWrapper()

â— AuthenticationWrapper() @Composable
  - AuthState(Check/OK/NG) ã‚’åˆ¤å®šã—ç”»é¢ã‚’æŒ¯ã‚Šåˆ†ã‘  
      * Authenticated â†’ AppNavigation()  
      * NotAuthenticated â†’ LoginScreen()  
      * Checking â†’ ç°¡æ˜“ãƒ­ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°

â— AppNavigation() @Composable
  NavHost ãƒ«ãƒ¼ãƒˆ:
    - "home"   â†’ ModernMediaBrowser
    - "folder/{folderId}" â†’ ModernMediaBrowser(å­ãƒ•ã‚©ãƒ«ãƒ€)
    - "player/{itemId}/{downloadUrl}" â†’ HighQualityPlayerScreen
    - "image/{itemId}" â†’ ç”»åƒãƒ“ãƒ¥ãƒ¼ã‚¢ (æœªå®Ÿè£…)
    - "settings" â†’ SettingsScreen

  * ModernMediaBrowser ã‹ã‚‰å‹•ç”»é¸æŠæ™‚  
    â†’ downloadUrl ã‚’ URL ã‚¨ãƒ³ã‚³ãƒ¼ãƒ‰ã—ã¦ player ç”»é¢ã¸  
  * OAuth ã‚³ãƒ¼ãƒ«ãƒãƒƒã‚¯ã¯ handleAuthRedirect() ã§å‡¦ç†

â— handleAuthRedirect(Intent)
  - ã‚¹ã‚­ãƒ¼ãƒ  msauth://com.example.tvmoview ã‚’ãƒ•ãƒƒã‚¯
  - ?code=xxx ã‚’å–ã‚Šå‡ºã—ãƒ­ã‚°å‡ºåŠ›ï¼ˆãƒˆãƒ¼ã‚¯ãƒ³äº¤æ› TBDï¼‰
â—ãƒã‚¤ãƒ³ãƒˆ
â€œèªè¨¼åˆ¤å®šâ†’ãƒŠãƒ“ã‚²ãƒ¼ã‚·ãƒ§ãƒ³â€ ã®ãƒãƒ–ãŒ AuthenticationWrapperã€‚
AppNavigation() ãŒãƒ«ãƒ¼ãƒˆ 5 ç”»é¢ã‚’ç®¡ç†ã€‚
OneDrive çµ±åˆã¯ AuthenticationManager ã¨ OneDriveRepository ã«å§”è­²ã€‚


ãƒ•ã‚¡ã‚¤ãƒ« : ModernMediaBrowser.kt
å½¹å‰²    : OneDrive / ãƒ­ãƒ¼ã‚«ãƒ«ã®ãƒ¡ãƒ‡ã‚£ã‚¢ã‚’ãƒ–ãƒ©ã‚¦ã‚ºã™ã‚‹ TV å‘ã‘ä¸€è¦§ UI
ä¾å­˜    : MediaBrowserViewModel, ModernTileView, ModernListView ã»ã‹

â— å¤–éƒ¨ API
  ModernMediaBrowser(
      folderId: String? = null,
      onMediaSelected: (MediaItem) -> Unit,
      onFolderSelected: (folderId: String) -> Unit,
      onSettingsClick: () -> Unit = null,
      onBackClick: () -> Unit = null
  )

â— ç”»é¢æ§‹æˆ
  â””â”€ Column
       â”œâ”€ ModernTopBar     â† ãƒ“ãƒ¥ãƒ¼åˆ‡æ›¿ãƒ»ä¸¦ã³æ›¿ãˆãƒ»è¨­å®šãƒ»æˆ»ã‚‹
       â””â”€ ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ Box
           â€¢ ãƒ­ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°     â†’ CircularProgress
           â€¢ ç©ºãƒ•ã‚©ãƒ«ãƒ€        â†’ EmptyStateView()
           â€¢ ä¸€è¦§è¡¨ç¤º
               â€£ ViewMode.TILE â†’ ModernTileView (3Ã—? ã‚°ãƒªãƒƒãƒ‰)
               â€£ ViewMode.LIST â†’ ModernListView (ç¸¦ãƒªã‚¹ãƒˆ)

â— ãƒ‡ãƒ¼ã‚¿å–å¾—ãƒ•ãƒ­ãƒ¼
  LaunchedEffect(folderId) { viewModel.loadItems(folderId) }
    â””â”€ OneDriveRepository ã‹ã‚‰ items Flow ã‚’è³¼èª­

â— ã‚¤ãƒ™ãƒ³ãƒˆåˆ†å²
  - ãƒ•ã‚©ãƒ«ãƒ€ item ã‚¯ãƒªãƒƒã‚¯ â†’ onFolderSelected(item.id)
  - å‹•ç”» / ç”»åƒ item ã‚¯ãƒªãƒƒã‚¯
      â€¢ Log å‡ºåŠ› (åå‰ & downloadUrl)
      â€¢ onMediaSelected(item)  // è¦ªãŒ NavHost ã§é·ç§»å‡¦ç†

â— ä¸¦ã³æ›¿ãˆ
  - TopBar ã®ã€ŒSortã€æŠ¼ä¸‹ â†’ SortDialog è¡¨ç¤º
  - SortDialog RadioButton â†’ viewModel.setSortBy(sort)

â— ViewMode åˆ‡æ›¿
  - TopBar ã®ã‚¢ã‚¤ã‚³ãƒ³æŠ¼ä¸‹ â†’ viewModel.toggleViewMode()
    â€£ Tile <-> List ã‚’ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ å¤‰æ›´

â— OneDrive çŠ¶æ…‹è¡¨ç¤ºï¼ˆãƒ‡ãƒãƒƒã‚°ï¼‰
  - `authManager.isAuthenticated()` ãŒ true ã®æ™‚
    â†’ ç”»é¢å³ä¸‹ã« ã€ŒğŸ” OneDriveæ¥ç¶šä¸­ã€ ãƒãƒƒã‚¸ã‚’è¡¨ç¤º
â—ãƒã‚¤ãƒ³ãƒˆ
ModernMediaBrowser ã¯ â€œãƒ‡ãƒ¼ã‚¿å–å¾—ãƒ»ã‚½ãƒ¼ãƒˆãƒ»è¡¨ç¤ºåˆ‡æ›¿â€ ã‚’ ViewModel ã§å®Œçµã€‚
ãƒ•ã‚©ãƒ«ãƒ€é·ç§»ã¨ãƒ¡ãƒ‡ã‚£ã‚¢èµ·å‹•ã¯ å¼•æ•°ã‚³ãƒ¼ãƒ«ãƒãƒƒã‚¯ ã«å§”è­²ã—ã€ç”»é¢å´ã§ NavHost ã‚’åˆ¶å¾¡ã€‚
é«˜é€Ÿ UI åˆ‡æ›¿ã®ãŸã‚ã€Tile / List ã¯ãã‚Œãã‚Œç‹¬è‡ª Compose ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã«åˆ†é›¢ã€‚



ãƒ•ã‚¡ã‚¤ãƒ« : HighQualityPlayerScreen.kt
å½¹å‰²    : Media3 ExoPlayer ã‚’ä½¿ã£ãŸ TV å‘ã‘é«˜æ©Ÿèƒ½ãƒ—ãƒ¬ã‚¤ãƒ¤ãƒ¼ç”»é¢

â— å¤–éƒ¨ API
  HighQualityPlayerScreen(
      itemId      : String,            // MediaItem ID
      onBack      : () -> Unit,        // æˆ»ã‚‹ã‚³ãƒ¼ãƒ«ãƒãƒƒã‚¯
      downloadUrl : String = ""        // OneDrive ç›´ URLï¼ˆã‚ã‚Œã°ï¼‰
  )

â— ä¸»ãªãƒ­ã‚¸ãƒƒã‚¯
  1. ExoPlayer ã‚’ remember ã§ç”Ÿæˆ
     â€¢ downloadUrl ãŒç©ºãªã‚‰ OneDriveRepository ã¸ãƒ•ã‚©ãƒ¼ãƒ«ãƒãƒƒã‚¯
  2. TV ãƒªãƒ¢ã‚³ãƒ³æ“ä½œã‚’ onKeyEvent ã§ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°
     â©/âª 15 ç§’ã‚·ãƒ¼ã‚¯ãƒ»éŸ³é‡ Â±ãƒ»å†ç”Ÿ/ä¸€æ™‚åœæ­¢ãƒ»æˆ»ã‚‹ãƒ€ãƒ–ãƒ«ãƒ—ãƒ¬ã‚¹
  3. ç‹¬è‡ªã‚·ãƒ¼ã‚¯ UI
     â€¢ seek æ™‚ã« `showSeekBarTemporarily()` ã§ 1 ç§’è¡¨ç¤º
  4. ç”»é¢ãƒãƒƒã‚¯ãƒãƒ³ãƒ‰ãƒ©
     â€¢ æˆ»ã‚‹ãƒœã‚¿ãƒ³ 2 å›æŠ¼ã—ã§ exitã€ãã‚Œä»¥å¤–ã¯ PlayerView ã‚³ãƒ³ãƒˆãƒ­ãƒ¼ãƒ©ã‚’éš ã™
  5. DisposableEffect ã§ release()

â— é–¢é€£è£œåŠ©é–¢æ•°
  - formatTime(timeMs)           // mm:ss å¤‰æ›
  - getVideoUrlSafely()          // downloadUrl â†’ OneDrive â†’ ãƒ†ã‚¹ãƒˆå‹•ç”»ã®é †
  - getOneDriveVideoUrl()        // itemId ã‹ã‚‰ç°¡æ˜“ URL æ§‹ç¯‰ï¼ˆè¦å®Ÿè£…ï¼‰
  - getTestVideoUrl()            // ã‚µãƒ³ãƒ—ãƒ«å‹•ç”» fallback

â— ã‚­ãƒ¼ã‚¤ãƒ™ãƒ³ãƒˆãƒãƒƒãƒ”ãƒ³ã‚°
  Key.Right         â†’ +15s ã‚·ãƒ¼ã‚¯
  Key.Left          â†’ â€“15s ã‚·ãƒ¼ã‚¯
  Key.Up / Down     â†’ éŸ³é‡ Â±0.1
  Key.Center / Play â†’ å†ç”Ÿâ†”åœæ­¢
  Key.Back          â†’ ãƒ€ãƒ–ãƒ«ãƒ—ãƒ¬ã‚¹ã§ onBack()

â— UI æ§‹æˆ
  Box(Black bg)
    â””â”€ AndroidView< PlayerView >
       +   ï¼ˆOverlayï¼‰Card + LinearProgress (ä¸€æ™‚çš„ã‚«ã‚¹ã‚¿ãƒ ã‚·ãƒ¼ã‚¯)


ãƒ•ã‚¡ã‚¤ãƒ« : HighQualityPlayerScreen.kt
å½¹å‰²    : Media3 ExoPlayer ã‚’ä½¿ã£ãŸ TV å‘ã‘é«˜æ©Ÿèƒ½ãƒ—ãƒ¬ã‚¤ãƒ¤ãƒ¼ç”»é¢

â— å¤–éƒ¨ API
  HighQualityPlayerScreen(
      itemId      : String,            // MediaItem ID
      onBack      : () -> Unit,        // æˆ»ã‚‹ã‚³ãƒ¼ãƒ«ãƒãƒƒã‚¯
      downloadUrl : String = ""        // OneDrive ç›´ URLï¼ˆã‚ã‚Œã°ï¼‰
  )

â— ä¸»ãªãƒ­ã‚¸ãƒƒã‚¯
  1. ExoPlayer ã‚’ remember ã§ç”Ÿæˆ
     â€¢ downloadUrl ãŒç©ºãªã‚‰ OneDriveRepository ã¸ãƒ•ã‚©ãƒ¼ãƒ«ãƒãƒƒã‚¯
  2. TV ãƒªãƒ¢ã‚³ãƒ³æ“ä½œã‚’ onKeyEvent ã§ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°
     â©/âª 15 ç§’ã‚·ãƒ¼ã‚¯ãƒ»éŸ³é‡ Â±ãƒ»å†ç”Ÿ/ä¸€æ™‚åœæ­¢ãƒ»æˆ»ã‚‹ãƒ€ãƒ–ãƒ«ãƒ—ãƒ¬ã‚¹
  3. ç‹¬è‡ªã‚·ãƒ¼ã‚¯ UI
     â€¢ seek æ™‚ã« `showSeekBarTemporarily()` ã§ 1 ç§’è¡¨ç¤º
  4. ç”»é¢ãƒãƒƒã‚¯ãƒãƒ³ãƒ‰ãƒ©
     â€¢ æˆ»ã‚‹ãƒœã‚¿ãƒ³ 2 å›æŠ¼ã—ã§ exitã€ãã‚Œä»¥å¤–ã¯ PlayerView ã‚³ãƒ³ãƒˆãƒ­ãƒ¼ãƒ©ã‚’éš ã™
  5. DisposableEffect ã§ release()

â— é–¢é€£è£œåŠ©é–¢æ•°
  - formatTime(timeMs)           // mm:ss å¤‰æ›
  - getVideoUrlSafely()          // downloadUrl â†’ OneDrive â†’ ãƒ†ã‚¹ãƒˆå‹•ç”»ã®é †
  - getOneDriveVideoUrl()        // itemId ã‹ã‚‰ç°¡æ˜“ URL æ§‹ç¯‰ï¼ˆè¦å®Ÿè£…ï¼‰
  - getTestVideoUrl()            // ã‚µãƒ³ãƒ—ãƒ«å‹•ç”» fallback

â— ã‚­ãƒ¼ã‚¤ãƒ™ãƒ³ãƒˆãƒãƒƒãƒ”ãƒ³ã‚°
  Key.Right         â†’ +15s ã‚·ãƒ¼ã‚¯
  Key.Left          â†’ â€“15s ã‚·ãƒ¼ã‚¯
  Key.Up / Down     â†’ éŸ³é‡ Â±0.1
  Key.Center / Play â†’ å†ç”Ÿâ†”åœæ­¢
  Key.Back          â†’ ãƒ€ãƒ–ãƒ«ãƒ—ãƒ¬ã‚¹ã§ onBack()

â— UI æ§‹æˆ
  Box(Black bg)
    â””â”€ AndroidView< PlayerView >
       +   ï¼ˆOverlayï¼‰Card + LinearProgress (ä¸€æ™‚çš„ã‚«ã‚¹ã‚¿ãƒ ã‚·ãƒ¼ã‚¯)
â—ãƒã‚¤ãƒ³ãƒˆ
TV ãƒªãƒ¢ã‚³ãƒ³å°‚ç”¨ UXï¼ˆã‚­ãƒ¼ã‚³ãƒ¼ãƒ‰ã«ç›´æ¥ãƒã‚¤ãƒ³ãƒ‰ï¼‰ã€‚
showSeekBarTemporarily() ãŒãƒ—ãƒ¬ã‚¤ãƒ¤ãƒ¼çŠ¶æ…‹ã‚’èª­ã¿å–ã‚Šã€è‡ªä½œã‚·ãƒ¼ã‚¯ãƒãƒ¼ã‚’ Overlay è¡¨ç¤ºã€‚
URL è§£æ±ºã¯ downloadUrl ãŒæœ€å„ªå…ˆã€ç„¡ã„å ´åˆã¯ OneDriveRepository ã¸ãƒ•ã‚©ãƒ¼ãƒ«ãƒãƒƒã‚¯ã—ã€å¤±æ•—æ™‚ã¯ãƒ†ã‚¹ãƒˆå‹•ç”»ã€‚




ãƒ•ã‚¡ã‚¤ãƒ« : AuthenticationManager.kt
å½¹å‰²    : Microsoft ã‚¢ã‚«ã‚¦ãƒ³ãƒˆ â€œDevice Code Flowâ€ ã‚’ä½¿ã£ãŸ TV å‘ã‘ OAuth2 èªè¨¼

â— è¨­å®šå®šæ•°
  clientId  = "c7981c06-â€¦"
  tenantId  = "consumers"
  scope     = "https://graph.microsoft.com/Files.Read offline_access"

â— å†…éƒ¨ãƒ‡ãƒ¼ã‚¿ã‚¯ãƒ©ã‚¹
  - DeviceCodeResponse(deviceCode, userCode, verificationUri, expiresIn, interval)
  - TokenResponse(accessToken, refreshToken?, expiresIn)
  - AuthToken(accessToken, refreshToken?, expiresAt)

â— å…¬é–‹ãƒ¡ã‚½ãƒƒãƒ‰
  suspend fun startDeviceCodeFlow(): DeviceCodeResponse
      â€¢ /devicecode ã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆå‘¼ã³å‡ºã—
      â€¢ userCode / verificationUri ã‚’è¿”å´ (TV ã§ãƒ¦ãƒ¼ã‚¶ãƒ¼ã«æç¤º)

  suspend fun pollForToken(deviceCode, interval): TokenResponse
      â€¢ æŒ‡å®š interval (sec) ã§ /token ã‚’ãƒãƒ¼ãƒªãƒ³ã‚°
      â€¢ access_token ã‚’å–å¾—ã—ãŸã‚‰ SharedPreferences ã«ä¿å­˜

  fun getSavedToken(): AuthToken?        // prefs ã‹ã‚‰èª­è¾¼
  fun isAuthenticated(): Boolean         // æœŸé™ãƒã‚§ãƒƒã‚¯ä»˜ã
  fun clearAuthentication()              // prefs å…¨ã‚¯ãƒªã‚¢

â— å†…éƒ¨å‡¦ç†ãƒã‚¤ãƒ³ãƒˆ
  - OkHttp + coroutine(Dispatchers.IO) ã‚’ä½¿ç”¨
  - ãƒãƒ¼ãƒªãƒ³ã‚°ã¯æœ€å¤§ 60 å› (â‰ˆ5 åˆ†) ã§ã‚¿ã‚¤ãƒ ã‚¢ã‚¦ãƒˆ
  - ã‚¨ãƒ©ãƒ¼ã‚³ãƒ¼ãƒ‰åˆ¥ã«ç´°ã‹ãä¾‹å¤–ã‚’æŠ•ã’åˆ†ã‘
      â€¢ authorization_pending / declined / expired_token
  - ä¿å­˜æ™‚ã« expiresAt = now + expiresIn*1000 ã§æœŸé™ç®¡ç†

â— TV å‘ã‘ä»•æ§˜
  - å¾“æ¥ã®ãƒ–ãƒ©ã‚¦ã‚¶ãƒªãƒ€ã‚¤ãƒ¬ã‚¯ãƒˆ Flow (`startAuthentication()`) ã¯ Unsupported
  - Device Code Flow ã«é™å®šã—ã€ã‚¹ãƒãƒ› or PC ãƒ–ãƒ©ã‚¦ã‚¶ã§èªè¨¼ã•ã›ã‚‹æ–¹å¼
 
  



ãƒ•ã‚¡ã‚¤ãƒ« : OneDriveRepository.kt
å½¹å‰²    : Microsoft Graph API â†’ MediaItem å¤‰æ› & downloadUrl ä»˜ä¸

â— ä¾å­˜
  - AuthenticationManager        // ã‚¢ã‚¯ã‚»ã‚¹ãƒˆãƒ¼ã‚¯ãƒ³å–å¾—ãƒ»æ¤œè¨¼
  - OneDriveApiService (Retrofit)// /me/drive ã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆ
  - OkHttp                       // å€‹åˆ¥ãƒ•ã‚¡ã‚¤ãƒ«è©³ç´°å‘¼ã³å‡ºã—

â— å…¬é–‹ API
  suspend fun getRootItems():   List<MediaItem>
  suspend fun getFolderItems(folderId): List<MediaItem>
  suspend fun getDownloadUrl(itemId):   String?   // å‹•ç”»ã ã‘è¿½åŠ å–å¾—
  fun    getCurrentPath(folderId?):     String

â— ãƒ‡ãƒ¼ã‚¿å–å¾—ãƒ•ãƒ­ãƒ¼
  1. èªè¨¼ãƒˆãƒ¼ã‚¯ãƒ³å–å¾— â†’ æœŸé™ãƒã‚§ãƒƒã‚¯
  2. /children API ã§ OneDriveItem list ã‚’å–å¾—
  3. OneDriveItem.toMediaItem() ã§ UI ç”¨ã¸å¤‰æ›
  4. isVideo ã®ã‚‚ã®ã ã‘ OkHttp ã§ `/items/{id}` ã‚’å©ã
     â†’ `@microsoft.graph.downloadUrl` ã‚’ãƒ‘ãƒ¼ã‚¹ã— MediaItem ã«ã‚³ãƒ”ãƒ¼

â— å†…éƒ¨ãƒ¡ã‚½ãƒƒãƒ‰
  - parseDownloadUrlFromResponse(json) : String?
      â€¢ JSON ã‹ã‚‰ downloadUrl æŠ½å‡º
  - OneDriveItem.toMediaItem()
      â€¢ ãƒ•ã‚©ãƒ«ãƒ€ / ãƒ•ã‚¡ã‚¤ãƒ«åˆ¤å®šãƒ»æ—¥æ™‚ãƒ‘ãƒ¼ã‚¹

â— ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°
  - ãƒˆãƒ¼ã‚¯ãƒ³ç„¡ã— or æœŸé™åˆ‡ã‚Œ         â†’ OneDriveResult.Error
  - HTTP é 2xx                     â†’ Error(code)
  - downloadUrl å–å¾—å¤±æ•—ï¼ˆå‹•ç”»ã®ã¿ï¼‰ â†’ null ã‚’è¨±å®¹ã— Log å‡ºåŠ›

â— è£œè¶³
  - Retrofit ã«ã¯ã‚·ãƒ³ãƒ—ãƒ«ãª GsonConverterFactory ã®ã¿
  - OkHttpClient ã¯ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆè¨­å®šï¼ˆãƒªãƒˆãƒ©ã‚¤ãƒ»ã‚­ãƒ£ãƒƒã‚·ãƒ¥ç„¡ã—ï¼‰
  - getDownloadUrl() ã¯ coroutine + Dispatchers.IO ã§å€‹åˆ¥å®Ÿè¡Œ
â—ãƒã‚¤ãƒ³ãƒˆ
getRootItems / getFolderItems ã§è¡¨ç¤ºãƒªã‚¹ãƒˆã‚’è¿”ã—ã¤ã¤ã€å„å‹•ç”»ãƒ•ã‚¡ã‚¤ãƒ«ã«ã¤ã„ã¦ è¿½åŠ ã§ downloadUrl ã‚’å–å¾—ã—ã¦ä¸Šæ›¸ã ã™ã‚‹äºŒæ®µéšæ§‹æˆã€‚
ä¾å­˜ã¯ AuthenticationManager ã® getSavedToken() ã«é›†ç´„ã—ã€ãƒˆãƒ¼ã‚¯ãƒ³ãŒç„¡åŠ¹ãªã‚‰å³ã‚¨ãƒ©ãƒ¼ã€‚
UI å´ã¯ MediaItem.downloadUrl ãŒ null ã‹ã©ã†ã‹ã§ã‚¹ãƒˆãƒªãƒ¼ãƒ å†ç”Ÿå¯å¦ã‚’åˆ¤æ–­ã€‚

